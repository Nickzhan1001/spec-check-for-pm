# PM 與客戶確認事項 Checklist

> 說明：
> - 【確認】項目：來自現有文件，需與客戶確認規則或決策
> - 【建議】項目：Agent 補充之潛在缺漏功能，需 PM / 主管評估是否納入

## 一、名詞與狀態定義（確認）
- [ ] 「任務」的定義是什麼（例如配送任務/車次/車輛班次）？是否有唯一識別（ID）與命名規則？（來源：PRD 3.出貨作業管理；PRD FR15-FR22）
- [ ] 「配送單」與「退貨單」的差異與關聯是什麼？是否存在一對多/多對一關係？（來源：PRD 3.2 燈箱顯示配送單；PRD 5.退貨作業管理）
- [ ] 「車牌」與「車次」在介面顯示與資料欄位上是否同義？若不同，對應規則是什麼？（來源：PRD 3.3 未排車次列表；PRD FR22-FR25）
- [ ] 「碼頭」的狀態集合是否只有：正常/缺貨待料/通知未到？是否存在「未排車次」這種碼頭狀態或只是無車輛的呈現？（來源：PRD 3.2 碼頭儀錶板；PRD FR16）
- [ ] 車輛狀態集合是否固定為：取消/完成出車/缺貨待料/通知未到？是否還有「已排車次/未排車次」等狀態需要定義？（來源：PRD 3.2 燈箱功能；PRD FR21）
- [ ] 收貨作業的狀態集合是否固定為：接貨中/回廠下貨/已完成？各狀態的判定條件是什麼？（來源：PRD 4.1 收貨列表頁；PRD FR28-FR39）
- [ ] 退貨單狀態「未完成/已立單」的定義與轉換條件是什麼？（來源：PRD 5.1 退貨單列表頁；PRD FR54-FR57）
- [ ] 退貨類型「直退/回廠退」的判定規則是什麼？（來源：PRD 5.1 退貨單列表頁）
- [ ] 「入庫分貨/越庫作業」的判定規則是否以「配送單迄點是否與登入人員內部廠區關聯」為準？資料來源與設定位置是什麼？（來源：PRD 4.2 配送點總表；Epics Additional Requirements「配送點管理 > 內部廠區」）
- [ ] 「內部廠區」的定義、來源、與對資料隔離的影響範圍是什麼（涵蓋哪些模組/哪些列表）？（來源：PRD Technical Constraints；PRD FR5；Epics Story 2.5）
- [ ] 公告的「已讀/未讀」是以「人」為單位還是以「裝置/帳號」為單位？（來源：PRD 2.即時公告；PRD FR14）

## 二、流程與操作規則（確認）
- [ ] 登入成功後的預設進入頁面是什麼？是否需要「多模組總覽」或直接進入某一模組？（來源：PRD User Journeys「登入與總覽」；PRD FR1）
- [ ] 忘記密碼的互動流程是「跳出燈箱」還是「進入獨立頁面」？（來源：PRD 1.1 忘記密碼；Epics Story 2.3）
- [ ] 忘記密碼燈箱/頁面顯示的內容來源是什麼（後台區塊內容的欄位結構、是否需要多語/多廠區）？（來源：PRD 1.1 忘記密碼；Epics Story 2.3）
- [ ] 公告列表的篩選條件有哪些（日期區間、已讀狀態、關鍵字等）？預設排序規則是什麼？（來源：PRD 2.1 公告列表頁；Epics Story 3.2）
- [ ] 「全部已讀/全部刪除」的作用範圍是否僅限於目前篩選結果？是否需要二次確認？（來源：PRD 2.1 公告列表頁；PRD FR11-FR12）
- [ ] 出貨作業的「篩選列」支援哪些欄位？是否只作用於「未排車次列表」且不影響碼頭儀錶板？（來源：PRD 3.1 篩選列；PRD FR23-FR24）
- [ ] 碼頭下拉選單可選車輛的條件（配送日期為當天/同廠區/包含送貨配送單/尚未完成出車或取消）中，「配送日期為當天」的時間界線與時區是什麼？（來源：PRD 3.2 未排車次下拉選單；PRD FR18）
- [ ] 點擊碼頭開啟燈箱後，配送單資訊的欄位清單與排序規則是什麼？（來源：PRD 3.2 燈箱功能；PRD FR20）
- [ ] 車輛狀態變更（取消/完成出車/缺貨待料/通知未到）是否需要二次確認？哪些狀態屬於「關鍵操作」？（來源：PRD Risk Mitigations「狀態確認機制」；PRD FR21）
- [ ] 車輛狀態是否允許「回復/撤銷」？若允許，允許的時間窗與可回復的狀態有哪些？（來源：PRD 3.2 狀態變更；PRD FR21-FR22）
- [ ] 收貨明細中「實收數量」預設同單據入數，修改後是即時儲存還是需要明確送出？（來源：PRD 4.3.1 入庫分貨；Epics Story 5.12）
- [ ] 越庫作業的「多組資料」新增/刪除規則中，資料群組的定義是什麼（配送點+板位+日期+備註）？（來源：PRD 4.3.2 越庫作業；PRD FR49-FR50）

## 三、跨文件一致性（確認）
- [ ] 忘記密碼互動在 PRD 為「燈箱」，在 Epics 為「忘記密碼頁面」：最終要以哪一種為準？（來源：PRD 1.1 忘記密碼；Epics Story 2.3）
- [ ] PRD 提到公告詳細頁有「返回列表功能」，Epics 是否有明確對應的 Story/Acceptance Criteria？（來源：PRD 2.2 公告詳細頁）
- [ ] PRD 提到「燈箱遮罩/樣式」與 Epics/UX 額外需求中的燈箱規格（遮罩不覆蓋整頁、底部按鈕區等）是否一致且為必須？（來源：PRD 3.2 燈箱功能；Epics Additional Requirements「車次詳細配送單燈箱」）
- [ ] PRD 提到「不包含：批量操作」但同時包含公告的「全部已讀/全部刪除」：此處「批量操作」的排除範圍定義是什麼？（來源：PRD MVP 範圍邊界；PRD 2.1 公告列表頁）
- [ ] PRD 的即時同步方案描述包含 WebSocket/事件驅動/重試，Epics 是否已將離線暫存與恢復同步納入核心範圍？（來源：PRD Reliability「網路中斷/重連/暫存」；Epics Additional Requirements「離線功能」）
- [ ] PRD 前端框架描述為「Vue 或 React」，Epics/UX 額外需求已指定 Vue 3 + Element Plus：此技術決策是否已定案？（來源：PRD Implementation Considerations；Epics Additional Requirements）
- [ ] PRD 要求「通知發送至運務 APP」且包含「通知未到」狀態，Epics 中「通知未到」是否有明確定義通知對象與通知內容？（來源：PRD 3.2 車輛操作/通知；Epics Story 4.7）

## 四、業務決策點（確認）
- [ ] 碼頭/車輛的預設顏色為綠色：此預設代表的狀態語意是什麼？是否存在其他需要顏色標示的狀態？（來源：PRD 3.2 碼頭顯示規則；PRD FR16）
- [ ] 收貨列表排序規則「先回廠下貨再接貨中、同狀態依回報時間新到舊」是否允許使用者切換排序？（來源：PRD 4.1 列表排序；PRD FR34）
- [ ] 「通知司機」的觸發時機與限制是什麼（每個任務可通知幾次、是否有冷卻時間、是否需要權限）？（來源：PRD 3.2 車輛操作；PRD FR19）
- [ ] 「通知未到」狀態是否一定要額外通知運務部後台主管？通知名單的維護方式是什麼？（來源：Epics Story 4.7）
- [ ] 出貨作業中「完成出車/取消」後車輛不再顯示：是否需要保留查詢入口（例如歷史紀錄）或完全不提供前台查詢？（來源：PRD 3.2 狀態變更邏輯；PRD FR22）
- [ ] 收貨作業「已完成後不可再次進入配送點總表」：是否存在主管覆核或例外解鎖流程？（來源：PRD 4.2 簽名板功能；PRD FR39）
- [ ] 退貨單「未完成可編輯、已立單不可編輯」：哪些欄位可編輯、哪些欄位永遠不可變更？（來源：PRD 5.1/5.2；PRD FR55-FR57）
- [ ] 公告刪除是「軟刪除」還是「硬刪除」？刪除後是否需要可還原？（來源：PRD 2.公告刪除；PRD FR10/FR12）
- [ ] 多裝置同步下，若兩位倉儲人員同時修改同一車輛/同一收貨明細，衝突解決規則以誰為準？（來源：PRD 即時同步/資料一致性風險；PRD FR59-FR63）

## 五、例外與錯誤處理（確認）
- [ ] 登入失敗除了「帳號密碼錯誤」外，若遇到帳號停用/鎖定/權限不足，錯誤訊息與處理流程如何定義？（來源：PRD 1.1 登入驗證；Epics Story 2.2）
- [ ] 忘記密碼的提示文字若後台未設定或讀取失敗，前台要顯示什麼訊息？（來源：PRD 1.1 忘記密碼；Epics Story 2.3）
- [ ] 推播通知發送失敗（第三方服務失敗/對方裝置離線）時，是否需要重試、補送、或顯示失敗狀態給倉儲人員？（來源：PRD Integration「推播通知機制」；PRD Risk Mitigations「重試機制」）
- [ ] WebSocket 斷線期間的操作是否允許暫存？暫存的範圍包含哪些操作（狀態變更/收貨明細修改/公告已讀）？（來源：PRD Reliability「網路中斷/暫存」；Epics Additional Requirements「離線功能」）
- [ ] 車輛狀態變更後的「顏色變更」與「列表/儀錶板移動」如果同步延遲超過 3 秒，前台要如何提示？（來源：PRD NFR5/NFR9；PRD FR59）
- [ ] 收貨明細的資料驗證規則是否包含：實收數量不可為負數、有效日期格式、必填欄位？驗證失敗時錯誤呈現方式是什麼？（來源：PRD Risk Mitigations「資料驗證」；PRD FR44-FR47）
- [ ] 多組資料「最少保留一組」：若使用者刪到剩 1 組，介面要如何防呆提示？（來源：PRD 4.3.1/4.3.2 多組資料管理；PRD FR46/FR50）
- [ ] 收貨簽名送出後若同步失敗或後端儲存失敗，是否允許重送？如何避免重複簽名或重複狀態更新？（來源：PRD 4.2 簽名板功能；PRD FR37-FR39）

## 六、跨系統整合與責任歸屬（確認）
- [ ] 本系統涉及哪些既有系統（總後台、運務 APP、資料庫/快取、公告/通知服務）？各系統的責任邊界如何定義？（來源：PRD 系統背景；PRD Integration Requirements）
- [ ] 各核心資料的 source of truth 是哪個系統：碼頭/人員/任務/配送單/退貨單/公告/收貨簽名？（來源：PRD Integration & Ownership；PRD FR72-FR76）
- [ ] 車輛狀態變更是前台寫入後台，還是後台/運務 APP 事件驅動回推前台？若兩邊都會更新，優先順序如何定義？（來源：PRD 即時同步/資料不一致風險；PRD FR59-FR63）
- [ ] 運務 APP 回報「回廠下貨」時，回報內容包含哪些欄位（時間/位置/任務ID）？資料格式與驗證規則是什麼？（來源：PRD 4.1 下貨狀態；PRD FR29-FR30）
- [ ] 「下貨碼頭選擇」結果需要同步回運務 APP：同步時機是選擇當下或另有確認流程？（來源：PRD 4.1 下貨碼頭選擇；Epics Story 5.4）
- [ ] 操作記錄/審計日誌需要記錄哪些事件（登入、狀態變更、退貨單編輯、收貨簽名）？誰可以查閱？（來源：PRD Risk Mitigations「操作記錄/審計」；PRD FR74-FR75）
- [ ] 整合失敗時的人工介入流程是什麼（例如後台手動修正狀態、補送通知、重新同步）？（來源：PRD Integration & Ownership「人工介入與自動處理界線」）

## 七、潛在缺漏功能與規劃建議（建議）
- [ ] [Agent 補充] 是否要納入「角色/權限矩陣」文件或設定頁，明確規範倉儲人員/主管/後台管理員各自可做哪些操作？
- [ ] [Agent 補充] 是否要納入「狀態變更歷史」查詢（車輛狀態、收貨狀態、退貨狀態），方便追溯與交接？
- [ ] [Agent 補充] 是否要納入「衝突提示」機制（同一筆資料被多人同時修改時提示、顯示最後更新者與時間）？
- [ ] [Agent 補充] 是否要納入「通知發送紀錄」與「補送/重試」操作入口，讓倉儲或主管可確認通知是否送達？
- [ ] [Agent 補充] 是否要納入「歷史車次/已完成出車/已取消」查詢頁，避免資訊完全消失造成追查困難？
- [ ] [Agent 補充] 是否要納入「收貨簽名檔案管理」規範（保存期限、加密方式、下載權限、是否需要列印/匯出）？
- [ ] [Agent 補充] 是否要納入「退貨單欄位變更/差異比對」視圖，協助查核哪些欄位被改過？
- [ ] [Agent 補充] 是否要納入「批量操作」範圍定義（僅公告批量 vs 出貨/收貨/退貨也支援批量），並在文件中明確列出？
- [ ] [Agent 補充] 是否要納入「離線模式可用操作清單」與「離線暫存容量/期限」規範，避免現場誤用？
- [ ] [Agent 補充] 是否要納入「資料重新同步/重整」入口（手動刷新、重新拉取狀態、顯示同步時間戳），提升現場排查效率？
